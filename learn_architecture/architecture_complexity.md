
#### 复杂度来源：高性能
* 软件系统中高性能带来的复杂度主要体现在两方面
  - 一方面是单台计算机内部为了高性能带来的复杂度；
  - 另一方面是多台计算机集群为了高性能带来的复杂度。
* 单机复杂度
  - 计算机内部复杂度最关键的地方就是操作系统（能否发挥硬件性能）
  - 操作系统和性能最相关的就是进程和线程
  - 一个高性能的软件系统，需要考虑如多进程、多线程、进程间通信、多线程并发等技术点
* 集群的复杂度
  - 任务分配：每台机器都可以处理完整的业务任务，不同的任务分配到不同的机器上执行
  - 任务分配例子
    - 需要增加一个任务分配器：可能是硬件网络设备（例如，F5、交换机等），可能是软件网络设备（例如，LVS），也可能是负载均衡软件（例如，Nginx、HAProxy），还可能是自己开发的系统
    - 任务分配器和真正的业务服务器之间有连接和交互，要选择合适的连接方式，并且对连接进行管理
    - 任务分配器需要增加分配算法：采用轮询算法，还是按权重分配，又或者按照负载进行分配
  - 任务分解例子（业务越来越复杂）
    - 简单的系统更加容易做到高性能：系统的功能越简单，影响性能的点就越少，就更加容易进行有针对性的优化
    - 可以针对单个任务进行扩展
    - 如果系统拆分得太细，为了完成某个业务，系统间的调用次数会呈指数级别上升，而系统间的调用通道目前都是通过网络传输的方式，性能远比系统内的函数调用要低得多

* 评论区
  - 性能是软件的一个重要质量属性。衡量软件性能包括了响应时间、TPS、服务器资源利用率等客观指标


#### 复杂度来源：高可用
* 高可用：系统无中断地执行其功能的能力，代表系统的可用性程度，是进行系统设计时的准则之一
* 本质：通过冗余实现高可用
* 冗余带来的复杂性
  - 计算高可用：任务分配器、连接管理、分配算法
  - 存储高可用：存储高可用的难点不在于如何备份数据，而在于如何减少或者规避数据不一致对业务造成的影响
  - 状态决策：无论采取什么样的方案，状态决策都不可能做到任何场景下都没有问题  
    - 独裁式：独立的决策者，缺点：单点故障
    - 协商式：主备决策，信息交换时易出问题
    - 民主式：投票决策，算法复杂、脑裂、投票数必须超过系统一半
* 其它
  - 可用性可达到99.99%，一年下来不可用时间最多53分钟
  - 为什么会出现不可用？硬件故障。软件BUG或网站更新升级发布。不可抗拒力
