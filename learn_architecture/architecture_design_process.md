
#### 架构设计三原则
* **（不确定性）**相比编程来说，架构设计并没有像编程语言那样的语法来进行约束，更多的时候是面对多种可能性时进行选择。
* 合适原则、简单原则、演化原则
  - 合适原则宣言：“合适优于业界领先”
    - 没那么多人，却想干那么多活，是失败的第一个主要原因。
    - 没有那么多积累，却想一步登天，是失败的第二个主要原因
    - 没有那么卓越的业务场景，却幻想灵光一闪成为天才，是失败的第三个主要原因
  - 简单原则宣言：“简单优于复杂”
    - 结构的复杂性；组成复杂系统的组件数量更多；同时这些组件之间的关系也更加复杂
    - 逻辑的复杂性：单个组件承担太多功能
  - 演化原则宣言：“演化优于一步到位”


#### 架构设计流程：识别复杂度
* 识别复杂度
  - 识别复杂度对架构师来说是一项挑战，因为原始的需求中并没有哪个地方会明确地说明复杂度在哪里，需要架构师在理解需求的基础上进行分析。有经验的架构师可能一看需求就知道复杂度大概在哪里；如果经验不足，那只能采取“排查法”，从不同的角度逐一进行分析。
  - 是否需要高性能？估算一天的消息量 =》 计算TPS、QPS =》峰值为平均值 * 3 =》 业务增长速度估算为峰值 * 4
  - 是否需要高可用？数据丢失、服务中断、法律法规等
  - 是否需要可扩展？
* 其它
  - 常见系统的性能量级需要烂熟于心，例如nginx负载均衡性能是3万左右，mc的读取性能5万左右，kafka号称百万级，zookeeper写入读取2万以上，http请求访问大概在2万左右。
  
  
#### 架构设计流程：设计备选方案
* 设计备选方案
  - 第一种常见的错误：设计最优秀的方案(架构设计原则中“合适原则”和“简单原则“的要求，挑选合适自己业务、团队、技术能力的方案才是好方案)
  - 第二种常见的错误：只做一个方案(单一方案设计会出现过度辩护的情况)
  - 第三种常见的错误：备选方案过于详细(耗费了大量的时间和精力，正确的做法是备选阶段关注的是技术选型，而不是技术细节)
* 合理的做法应该是什么样的呢
  - 备选方案的数量以 3 ~ 5 个为最佳(少于 3 个方案可能是因为思维狭隘，考虑不周全；多于 5 个则需要耗费大量的精力和时间，并且方案之间的差别可能不明显)
  - 备选方案的差异要比较明显
  - 备选方案的技术不要只局限于已经熟悉的技术  
  
  
#### 架构设计流程：评估和选择备选方案
* 如何挑选出最终的方案的困难点
  - 每个方案都是可行的
  - 没有哪个方案是完美的
  - 评价标准主观性比较强
* 指导思想
  - 最简派：挑选一个看起来最简单的方案
  - 最牛派：倾向于挑选技术上看起来最牛的方案
  - 最熟派：挑选自己最熟悉的方案
  - 领导派：领导选
* 评估和选择备选方案
  - 列出我们需要关注的质量属性点，然后分别从这些质量属性的维度去评估每个方案，再综合挑选适合当时情况的最优方案。
  - 常见的方案质量属性点有：性能、可用性、硬件成本、项目投入、复杂度、安全性、可扩展性等
  - 需要评估未来业务发展的规模时，一种简单的方式是将当前的业务规模乘以 2 ~4 即可
  - 属性点
    - 性能、复杂度、硬件成本、可运维性、可靠性、人力投放等  
* 错误的选择方法
  - 数量对比法：哪个优点多选哪个 - 所有属性同等重要，没有考虑优先级
  - 加权法：每个属性给一个权重 - 难设权重标准
* 正确的优先级选择
  - 属性优先级排序；先挑满足第一优先级的；再挑满足第二……
  
  
#### 架构设计流程：详细方案设计
